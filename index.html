<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minhas Notas</title>
    <style>
        body {
            background-color: #121212;
            color: #ffffff;
            font-family: Arial, sans-serif;
        }
        .criar-nota {
            margin: 20px;
        }
        .notas {
            margin: 20px;
        }
        .nota {
            background-color: #1e1e1e;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .confirmacao {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #ffffff;
            color: #000000;
            padding: 20px;
            border-radius: 5px;
            z-index: 10;
        }
        .mensagem {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #000000;
            color: #ffffff;
            padding: 10px;
            border-radius: 5px;
        }
    </style>
    <script>
        let notas = JSON.parse(localStorage.getItem('notas')) || [];

        function adicionarNota() {
            const titulo = document.getElementById('tituloInput').value;
            const conteudo = document.getElementById('conteudoInput').value;

            if (titulo === '' && conteudo === '') {
                alert("Você deve inserir um título ou conteúdo para salvar a nota.");
                return;
            }

            const nota = {
                id: Date.now(),
                titulo: titulo || 'Nota sem título',
                conteudo: conteudo || '',
                codigo: '',
                bloqueada: false
            };

            notas.push(nota);
            atualizarNotasLocalStorage();
            mostrarNotas();
            document.getElementById('tituloInput').value = '';
            document.getElementById('conteudoInput').value = '';
        }

        function mostrarNotas() {
            const notasContainer = document.getElementById('notasContainer');
            notasContainer.innerHTML = '';
            notas.forEach(nota => {
                const notaDiv = document.createElement('div');
                notaDiv.className = 'nota';
                notaDiv.innerHTML = `
                    <h3>${nota.titulo}</h3>
                    ${nota.bloqueada ? '<p>Nota bloqueada. Insira o código para visualizar.</p>' : `<p>${nota.conteudo}</p>`}
                    <button onclick="abrirEditarNota(${nota.id})">Editar</button>
                    <button onclick="abrirConfirmacaoEliminar(${nota.id})">Eliminar</button>
                    ${!nota.bloqueada ? '<button onclick="bloquearNota(${nota.id})">Bloquear Nota</button>' : ''}
                `;
                notasContainer.appendChild(notaDiv);
            });
        }

        function bloquearNota(id) {
            const nota = notas.find(n => n.id === id);
            const codigo = prompt("Digite o código de até 12 dígitos para bloquear a nota:");
            if (codigo && codigo.length <= 12) {
                nota.codigo = codigo;
                nota.bloqueada = true;
                atualizarNotasLocalStorage();
                mostrarNotas();
            } else {
                alert("Código inválido!");
            }
        }

        function abrirEditarNota(id) {
            const nota = notas.find(n => n.id === id);
            if (nota.bloqueada) {
                const codigo = prompt("Insira o código da nota para editar:");
                if (codigo === nota.codigo) {
                    const novoTitulo = prompt("Novo título:", nota.titulo);
                    const novoConteudo = prompt("Novo conteúdo:", nota.conteudo);
                    nota.titulo = novoTitulo || nota.titulo;
                    nota.conteudo = novoConteudo || nota.conteudo;
                    atualizarNotasLocalStorage();
                    mostrarNotas();
                    alert("Nota atualizada com sucesso!");
                } else {
                    alert("Código incorreto!");
                }
            } else {
                const novoTitulo = prompt("Novo título:", nota.titulo);
                const novoConteudo = prompt("Novo conteúdo:", nota.conteudo);
                nota.titulo = novoTitulo || nota.titulo;
                nota.conteudo = novoConteudo || nota.conteudo;
                atualizarNotasLocalStorage();
                mostrarNotas();
                alert("Nota atualizada com sucesso!");
            }
        }

        function abrirConfirmacaoEliminar(id) {
            const nota = notas.find(n => n.id === id);
            const codigo = nota.bloqueada ? prompt("Insira o código da nota para eliminar:") : '';
            if (nota.bloqueada && codigo !== nota.codigo) {
                alert("Código incorreto!");
                return;
            }
            const confirmacaoDiv = document.getElementById('confirmacao');
            confirmacaoDiv.style.display = 'block';
            document.getElementById('confirmacaoMensagem').innerText = "Tem certeza que deseja eliminar esta nota?";
            document.getElementById('confirmacaoMensagem').setAttribute('data-id', id);
        }

        function confirmarSim() {
            const id = document.getElementById('confirmacaoMensagem').getAttribute('data-id');
            notas = notas.filter(nota => nota.id !== Number(id));
            atualizarNotasLocalStorage();
            mostrarNotas();
            mostrarMensagem("Nota eliminada com sucesso!");
            fecharConfirmacao();
        }

        function fecharConfirmacao() {
            document.getElementById('confirmacao').style.display = 'none';
        }

        function atualizarNotasLocalStorage() {
            localStorage.setItem('notas', JSON.stringify(notas));
        }

        function mostrarMensagem(mensagem) {
            const mensagemContainer = document.createElement('div');
            mensagemContainer.className = 'mensagem';
            mensagemContainer.innerText = mensagem;
            document.body.appendChild(mensagemContainer);
            mensagemContainer.style.display = 'block';

            setTimeout(() => {
                mensagemContainer.remove();
            }, 2000);
        }

        window.onload = mostrarNotas;
    </script>
</head>
<body>
    <header>
        <h1>Minhas Notas</h1>
    </header>

    <div class="criar-nota">
        <h2>Criar Notas</h2>
        <input type="text" id="tituloInput" placeholder="Título da nota" />
        <input type="text" id="conteudoInput" placeholder="Conteúdo da nota" />
        <button onclick="adicionarNota()">Adicionar Nota</button>
    </div>

    <div id="notasContainer" class="notas">
        <!-- As notas serão adicionadas aqui -->
    </div>

    <div id="confirmacao" class="confirmacao">
        <p id="confirmacaoMensagem"></p>
        <button class="sim" onclick="confirmarSim()">Sim</button>
        <button class="nao" onclick="fecharConfirmacao()">Não</button>
    </div>

    <footer>
        <p>&copy; Apenas Notas</p>
    </footer>
</body>
</html>
